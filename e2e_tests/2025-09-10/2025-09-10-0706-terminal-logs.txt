=== E2E TEST TERMINAL LOGS - 2025-09-10-0706 ===
=== E2E TEST EXECUTION LOGS ===
Date: 2025-09-10-0706
Command: python3 -m app.end_to_end_testing
Environment: test_env (virtual environment activated)
Working Directory: /Users/jthompson/Documents/GitHub/run-density

=== TERMINAL OUTPUT ===
INFO:httpx:HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://testserver/ready "HTTP/1.1 200 OK"
WARNING:app.density_template_engine:Rulebook not found at requirements/density_v1.6.11/Density_Rulebook_v2.yml, using enhanced default templates
[Multiple warnings about rulebook not found - using enhanced default templates]
INFO:httpx:HTTP Request: POST http://testserver/api/density-report "HTTP/1.1 200 OK"
INFO:root:BINNING APPLIED: time_bins=False, distance_bins=True (window=2.0min, zone=100m)
INFO:root:BINNING APPLIED: time_bins=False, distance_bins=True (window=4.5min, zone=100m)
INFO:root:BINNING APPLIED: time_bins=False, distance_bins=True (window=6.9min, zone=100m)
INFO:root:BINNING APPLIED: time_bins=False, distance_bins=True (window=8.9min, zone=150m)
INFO:root:BINNING APPLIED: time_bins=True, distance_bins=True (window=32.2min, zone=150m)
INFO:root:BINNING APPLIED: time_bins=False, distance_bins=True (window=3.7min, zone=150m)
INFO:root:BINNING APPLIED: time_bins=True, distance_bins=True (window=40.9min, zone=200m)
INFO:root:BINNING APPLIED: time_bins=True, distance_bins=True (window=53.9min, zone=200m)
INFO:root:BINNING APPLIED: time_bins=True, distance_bins=True (window=55.5min, zone=200m)
INFO:root:F1 Half vs 10K PER-RUNNER VALIDATION:
INFO:root:  Total Half: 912, Overtaking: 694 (76.1%)
INFO:root:  Total 10K: 618, Overtaking: 451 (73.0%)
INFO:root:  Co-presence Half: 912, 10K: 555
INFO:root:  Overlap pairs: 58708
WARNING:root:F1 Half vs 10K DISCREPANCY DETECTED!
WARNING:root:  Current calculation: 840 (92.1%), 494 (79.9%)
WARNING:root:  Validation results:  694 (76.1%), 451 (73.0%)
WARNING:root:  Using validation results.
[Additional binning applied logs for segments B1, B2, B3, F1, H1, I1, J1, J4, J5, K1, L1, M1]
INFO:httpx:HTTP Request: POST http://testserver/api/temporal-flow-report "HTTP/1.1 200 OK"
[Repeated binning applied logs for temporal flow analysis]
INFO:httpx:HTTP Request: POST http://testserver/api/temporal-flow "HTTP/1.1 200 OK"
[Repeated binning applied logs for temporal flow analysis]

=== STREAMLINED END-TO-END TESTING ===
Testing core API endpoints and report generation (Flow + Density only)

=== API ENDPOINT TESTING ===

1. Testing Health and Ready Endpoints...
   /health: 200 ‚úÖ
   /ready: 200 ‚úÖ

2. Testing Report Generation Endpoints...
üîç Starting density analysis...
üîç Analysis results keys: ['summary', 'segments']
üîç Analysis ok status: NOT_FOUND
üîç Segments type: <class 'dict'>
üîç Segment keys: ['A1', 'A2', 'A3']...
üîç First segment type: <class 'dict'>
üîç First segment keys: ['summary', 'time_series', 'sustained_periods', 'events_included', 'seg_label', 'per_event']
üìä Density report saved to: reports/analysis/2025-09-10/2025-09-10-0704-Density.md
üîç Starting temporal flow analysis...
[Detailed binning applied logs for each segment]
üìä Temporal flow report saved to: reports/analysis/2025-09-10/2025-09-10-0705-Flow.md
üìä Temporal flow analysis exported to: reports/analysis/2025-09-10/2025-09-10-0705-Flow.csv
‚ÑπÔ∏è  No Flow Audit data to export
[Repeated binning applied logs for temporal flow analysis]
   /api/density-report: 200 ‚úÖ
   /api/temporal-flow-report: 200 ‚úÖ
   /api/temporal-flow: 200 ‚úÖ

API Endpoint Testing: ‚úÖ ALL PASSED

=== REPORT FILE TESTING ===

1. Temporal Flow MD files: ‚úÖ
2. Temporal Flow CSV files: ‚úÖ
3. Density Analysis MD files: ‚úÖ

Report File Testing: ‚úÖ ALL PASSED

=== REPORT CONTENT QUALITY TESTING ===

1. Testing Temporal Flow Report Content...
   Proper event names (10K Range, Half Range): ‚úÖ
   No generic names (Event A Range): ‚úÖ
   No NaN values: ‚úÖ

2. Testing Density Analysis Report Content...
   Proper segment names (A1: Start to Queen/Regent): ‚úÖ
   No unknown segments: ‚úÖ
   Proper counts (Total Segments: 22): ‚úÖ (Density analyzes physical course segments, while Flow analyzes runner pairs - hence different counts)

3. Testing Actual vs Expected Flow Results Validation...
   Validating Actual vs Expected Flow Results:
   ================================================================================
   ‚úÖ MATCH A1, Start to Queen/Regent, Full vs Half, overtake, 0/0, 0/0, 0.0/0.0, 0.0/0.0
   ‚úÖ MATCH A1, Start to Queen/Regent, Full vs 10K, overtake, 0/0, 0/0, 0.0/0.0, 0.0/0.0
   ‚úÖ MATCH A1, Start to Queen/Regent, Half vs 10K, overtake, 0/0, 0/0, 0.0/0.0, 0.0/0.0
   ‚úÖ MATCH A2, Queen/Regent to WSB mid-point, Full vs Half, overtake, 0/0, 0/0, 0.0/0.0, 0.0/0.0
   ‚úÖ MATCH A2, Queen/Regent to WSB mid-point, Full vs 10K, overtake, 0/0, 0/0, 0.0/0.0, 0.0/0.0
   ‚úÖ MATCH A2, Queen/Regent to WSB mid-point, Half vs 10K, overtake, 34/1, 34/1, 3.7/0.2, 3.7/0.2
   ‚úÖ MATCH A3, WSB mid-point to Friel, Full vs Half, overtake, 0/0, 0/0, 0.0/0.0, 0.0/0.0
   ‚úÖ MATCH A3, WSB mid-point to Friel, Full vs 10K, overtake, 0/0, 0/0, 0.0/0.0, 0.0/0.0
   ‚úÖ MATCH A3, WSB mid-point to Friel, Half vs 10K, overtake, 128/13, 128/13, 14.0/2.1, 14.0/2.1
   ‚úÖ MATCH B1, Friel to 10K Turn, Full vs 10K, overtake, 11/16, 11/16, 3.0/2.6, 3.0/2.6
   ‚úÖ MATCH B2, 10K Turn to Friel, Full vs 10K, overtake, 81/56, 81/56, 22.0/9.1, 22.0/9.1
   ‚úÖ NO OVERTAKING (as expected) B3, 10K Turn to Friel, Full vs 10K, none
   ‚úÖ MATCH F1, Friel to Station Rd., Full vs Half, merge, 52/56, 52/56, 14.1/6.1, 14.1/6.1
   ‚úÖ MATCH F1, Friel to Station Rd., Full vs 10K, merge, 171/122, 171/122, 46.5/19.7, 46.5/19.7
   ‚úÖ MATCH F1, Friel to Station Rd., Half vs 10K, merge, 694/451, 694/451, 76.1/73.0, 76.1/73.0
   ‚úÖ MATCH H1, Trail/Aberdeen to/from Station Rd, Full vs Half, counterflow, 203/431, 203/431, 55.2/47.3
   ‚úÖ MATCH H1, Trail/Aberdeen to/from Station Rd, Full vs 10K, counterflow, 119/87, 119/87, 32.3/14.1
   ‚úÖ MATCH H1, Trail/Aberdeen to/from Station Rd, Half vs 10K, counterflow, 11/10, 11/10, 1.2/1.6
   ‚úÖ MATCH I1, Station Rd to Bridge/Mill, Full vs Half, counterflow, 42/9, 42/9, 11.4/1.0
   ‚úÖ MATCH J1, Bridge/Mill to Half Turn (Outbound), Full vs Half, counterflow, 147/209, 147/209, 39.9/22.9
   ‚úÖ MATCH J4, Half Turn to Bridge/Mill, Full vs Half, counterflow, 130/170, 130/170, 35.3/18.6
   ‚úÖ MATCH J5, Half Turn to Bridge/Mill (Slow Half), Full vs Half, counterflow, 45/24, 45/24, 12.2/2.6
   ‚úÖ MATCH K1, Bridge/Mill to Station Rd, Full vs Half, counterflow, 180/244, 180/244, 48.9/26.8
   ‚úÖ MATCH L1, Trail/Aberdeen to/from Station Rd, Full vs Half, overtake, 0/0, 0/0, 0.0/0.0, 0.0/0.0
   ‚úÖ MATCH L1, Trail/Aberdeen to/from Station Rd, Full vs 10K, overtake, 206/217, 206/217, 56.0/35.1
   ‚úÖ MATCH L1, Trail/Aberdeen to/from Station Rd, Half vs 10K, overtake, 11/10, 11/10, 1.2/1.6
   ‚úÖ MATCH M1, Trail/Aberdeen to Finish (Full to Loop), Full vs Half, overtake, 66/96, 66/96, 17.9/10.5
   ‚úÖ MATCH M1, Trail/Aberdeen to Finish (Full to Loop), Full vs 10K, overtake, 124/141, 124/141, 33.7/22.8
   ‚úÖ MATCH M1, Trail/Aberdeen to Finish (Full to Loop), Half vs 10K, overtake, 17/12, 17/12, 1.9/1.9
   ================================================================================
   Overall Validation: ‚úÖ ALL MATCH

Overall Report Quality: ‚úÖ EXCELLENT

=== FINAL SUMMARY ===
Date: 2025-09-10-0706
Environment: http://testserver:8080 (local TestClient)
Version: v1.6.12
API Endpoints: ‚úÖ PASSED
Report Files: ‚úÖ PASSED
   Files Created:
   - reports/analysis/2025-09-10/2025-09-10-0705-Flow.md
   - reports/analysis/2025-09-10/2025-09-10-0705-Flow.csv
   - reports/analysis/2025-09-10/2025-09-10-0704-Density.md
Actual to Expected: ‚úÖ PASSED (Validation: 29/29 segments, 100.0% success)
Content Quality: ‚úÖ PASSED

üéâ STREAMLINED TESTS PASSED! Core system is ready!

üìù NOTE: Flow Runner detailed analysis is not included in automated tests due to computational requirements.
   Flow Runner reports can be run locally (not currently supported in production) using:
   curl -X POST 'http://localhost:8080/api/flow-audit' \
     -H 'Content-Type: application/json' \
     -d '{"paceCsv": "data/runners.csv", "segmentsCsv": "data/segments_new.csv", "startTimes": {"Full": 420, "10K": 440, "Half": 460}}'

=== STREAMLINED END-TO-END TESTING COMPLETE ===

üìÑ E2E Test Results saved to: reports/test-results/2025-09-10/2025-09-10-0703-E2E.md

=== EXECUTION COMPLETED ===
Exit Code: 0
Status: SUCCESS
