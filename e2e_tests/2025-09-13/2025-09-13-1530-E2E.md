=== STREAMLINED END-TO-END TESTING ===
Testing core API endpoints and report generation (Flow + Density only)

=== PREFLIGHT VALIDATION ===

✅ Preflight validation passed: 53 checks passed
   File: data/segments.csv
   Rows: 22, Columns: 27
=== API ENDPOINT TESTING ===

1. Testing Health and Ready Endpoints...
   /health: 200 ✅
   /ready: 200 ✅

2. Testing Report Generation Endpoints...
🔍 Starting density analysis...
🔍 Analysis results keys: ['summary', 'segments']
🔍 Analysis ok status: NOT_FOUND
🔍 Segments type: <class 'dict'>
🔍 Segment keys: ['A1', 'A2', 'A3']...
🔍 First segment type: <class 'dict'>
🔍 First segment keys: ['summary', 'time_series', 'sustained_periods', 'events_included', 'seg_label', 'flow_type', 'per_event', 'v2_context']
📊 Density report saved to: reports/2025-09-13/2025-09-13-1530-Density.md
🔍 Starting temporal flow analysis...
🔧 BINNING APPLIED to B1: time_bins=False, distance_bins=True
   Overlap: 8.9min, Conflict: 150m
🔧 BINNING APPLIED to B2: time_bins=True, distance_bins=True
   Overlap: 32.2min, Conflict: 150m
🔧 BINNING APPLIED to B3: time_bins=False, distance_bins=True
   Overlap: 3.7min, Conflict: 150m
🔧 BINNING APPLIED to F1: time_bins=True, distance_bins=True
   Overlap: 40.9min, Conflict: 200m
🔧 BINNING APPLIED to F1: time_bins=True, distance_bins=True
   Overlap: 53.9min, Conflict: 200m
🔧 BINNING APPLIED to F1: time_bins=True, distance_bins=True
   Overlap: 55.5min, Conflict: 200m
✅ High overtaking rates in F1: 76.1%, 73.0% - BINNING APPLIED
🔧 BINNING APPLIED to H1: time_bins=True, distance_bins=True
   Overlap: 91.1min, Conflict: 150m
✅ High overtaking rates in H1: 55.2%, 47.3% - BINNING APPLIED
🔧 BINNING APPLIED to H1: time_bins=True, distance_bins=True
   Overlap: 53.0min, Conflict: 150m
🔧 BINNING APPLIED to H1: time_bins=True, distance_bins=True
   Overlap: 29.4min, Conflict: 150m
🔧 BINNING APPLIED to I1: time_bins=True, distance_bins=True
   Overlap: 86.6min, Conflict: 200m
🔧 BINNING APPLIED to J1: time_bins=True, distance_bins=True
   Overlap: 98.0min, Conflict: 200m
🔧 BINNING APPLIED to J4: time_bins=True, distance_bins=True
   Overlap: 109.9min, Conflict: 200m
🔧 BINNING APPLIED to J5: time_bins=True, distance_bins=True
   Overlap: 77.0min, Conflict: 200m
🔧 BINNING APPLIED to K1: time_bins=True, distance_bins=True
   Overlap: 142.7min, Conflict: 200m
🔧 BINNING APPLIED to L1: time_bins=True, distance_bins=True
   Overlap: 65.9min, Conflict: 150m
🔧 BINNING APPLIED to L1: time_bins=True, distance_bins=True
   Overlap: 64.8min, Conflict: 150m
✅ High overtaking rates in L1: 56.0%, 35.1% - BINNING APPLIED
🔧 BINNING APPLIED to L1: time_bins=True, distance_bins=True
   Overlap: 29.4min, Conflict: 150m
🔧 BINNING APPLIED to M1: time_bins=True, distance_bins=False
   Overlap: 62.1min, Conflict: 100m
🔧 BINNING APPLIED to M1: time_bins=True, distance_bins=False
   Overlap: 61.3min, Conflict: 100m
🔍 M1 Half vs 10K MAIN ANALYSIS TRACE:
  Input data: A=912 runners, B=618 runners
  Segment boundaries: A=[20.85, 21.1], B=[9.75, 10.0]
  Convergence point: 20.85 km
  Dynamic conflict length: 100.0 m
  Overlap duration: 26.483333333333334 min
  Raw calculation results: 17/12
  Co-presence: 17/12
  Unique encounters: 55
  Participants involved: 29
🔧 BINNING APPLIED to M1: time_bins=True, distance_bins=False
   Overlap: 26.5min, Conflict: 100m
📊 Temporal flow report saved to: reports/2025-09-13/2025-09-13-1532-Flow.md
📊 Temporal flow analysis exported to: reports/2025-09-13/2025-09-13-1532-Flow.csv
ℹ️  No Flow Audit data to export
