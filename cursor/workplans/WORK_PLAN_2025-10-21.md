# Work Plan - October 21, 2025

## üéØ **TODAY'S MISSION**
**Primary Goal**: Implement Issues #280, #281, #282 to complete RF-FE-002 Epic  
**Secondary Goal**: Fix outstanding bugs (flag count, density API)  
**Foundation**: Step 8 complete with three fully-specified issues ready to implement

## üèÜ **YESTERDAY'S SUCCESS FOUNDATION**
- **‚úÖ Step 8 COMPLETE**: All UI pages bound to real artifacts
- **‚úÖ Gap Analysis COMPLETE**: Missing functionality identified
- **‚úÖ Issue #280 READY**: Heatmaps, bin-level details, auto-captions fully specified
- **‚úÖ Issue #281 READY**: Data dictionary complete draft from ChatGPT
- **‚úÖ Issue #282 READY**: UI/UX polish with complete CSS + code snippets
- **‚úÖ All Questions Answered**: 24 Q&A pairs with ChatGPT, 100% developer confidence

## üìã **TODAY'S WORK PLAN**

### **Phase 1: Quick Bug Fixes** üêõ
**Priority**: HIGH - Fix blocking issues before new features  
**Estimated Time**: 1-2 hours  
**Goal**: Resolve flag count bug and density API KeyError

#### **Sub-Tasks:**
1. **Fix Flag Count Bug** (45 min)
   - Dashboard shows 2 flagged segments, should show 17
   - Root cause: `flags.json` vs. `segment_metrics.json` discrepancy
   - Fix: Ensure flag count uses correct source
   - Test: Verify dashboard shows 17/22 flagged
   - Commit: `fix(dashboard): correct flagged segment count to match flags.json`

2. **Fix Density API KeyError** (45 min)
   - `/api/density/segment/{seg_id}` returns `{"error": "'segment_id'"}`
   - Root cause: Storage path resolution issue
   - Fix: Correct artifact path reading in `api_density.py`
   - Test: Verify API returns valid response for A1, B2, etc.
   - Commit: `fix(density): resolve storage path for segment detail API`

### **Phase 2: Issue #281 - Data Dictionary Documentation** üìö
**Priority**: HIGH - Critical for QA and future development  
**Estimated Time**: 2-3 hours  
**Goal**: Create comprehensive data source map and dictionary

#### **Sub-Tasks for Issue #281:**
1. **Create Documentation File** (60 min)
   - File: `docs/DATA_SOURCE_MAP_AND_DICTIONARY.md`
   - Copy ChatGPT's complete draft from `cursor/chatgpt/DATA_SOURCE_MAP_AND_DICTIONARY_DRAFT.md`
   - Format for GitHub readability (proper tables, code blocks)
   - Verify all API endpoints match current implementation
   - Verify all artifact schemas match Step 7 QA-fixed artifacts

2. **Integrate Documentation** (30 min)
   - Add link from `docs/REFERENCE.md` to new document
   - Update README if appropriate
   - Cross-check with `VARIABLE_NAMING_REFERENCE.md`

3. **Validation** (45 min)
   - Verify against actual API responses (hit all 10 endpoints)
   - Verify against actual artifact files (check schemas)
   - Cross-check with `tests/test_ui_artifacts_qc.py`
   - Manual review of all sections

4. **Close Issue** (15 min)
   - Post completion comment to Issue #281
   - Post comment to Issue #279 (parent)
   - Close Issue #281
   - Commit: `docs: add comprehensive data source map and dictionary`

### **Phase 3: Issue #282 - UI/UX Polish** üé®
**Priority**: HIGH - Critical for professional appearance and functional map  
**Estimated Time**: 6-8 hours  
**Goal**: Apply design system and fix Segments map

#### **Sub-Tasks for Issue #282:**

**Part A: Design System** (2-3 hours)

1. **Create Static Directory & CSS** (45 min)
   - Create `static/` directory at project root
   - Create `static/css/app.css` with ChatGPT's complete CSS
   - Verify all CSS variables and components present
   - No modifications - use exact CSS provided

2. **Mount Static Files in FastAPI** (15 min)
   - File: `app/main.py`
   - Add: `from fastapi.staticfiles import StaticFiles`
   - Add: `app.mount("/static", StaticFiles(directory="static"), name="static")`
   - Test: Verify `/static/css/app.css` loads (HTTP 200)

3. **Update Base Template** (30 min)
   - File: `templates/base.html`
   - Add Google Fonts link (Inter family)
   - Add CSS link: `<link rel="stylesheet" href="/static/css/app.css">`
   - Inject LOS colors into CSS variables (already have pattern from Step 5)
   - Remove conflicting inline styles

4. **Apply Classes to Pages** (60 min)
   - **Dashboard**: Apply `.banner`, `.kpi-grid .kpi`, `.section`
   - **Segments**: Apply `.map-wrap`, `.table-wrap .table`
   - **Density**: Apply `.section`, `.table-wrap .table`, `.caption`
   - **Flow**: Apply `.table-wrap .table`
   - **Reports**: Apply `.section`, `.btn.primary`
   - **Health**: Apply `.section`, `.table-wrap .table`, `.badge.gray`
   - **Password**: Apply `.section`, `.btn.primary`

5. **Visual QA** (30 min)
   - Load each page, verify styling applied
   - Check responsive breakpoints (1024px, 768px, 520px)
   - Verify SSOT LOS colors injection
   - Test on Chrome, Firefox, Safari
   - No console errors

**Part B: Fix Segments Map** (1-2 hours)

1. **Diagnose Current State** (15 min)
   - Hit `/api/segments/geojson` in browser
   - Check if features exist (should have 22 segments)
   - Check browser console for errors
   - Check network tab for API call

2. **Apply Leaflet Fix** (45 min)
   - File: `templates/pages/segments.html`
   - Replace existing Leaflet code with ChatGPT's complete snippet
   - Ensure `map.invalidateSize()` called
   - Ensure `fitBounds()` called with valid bounds check
   - Add legend component
   - Add HTML escaping for tooltips
   - Test `?focus=B2` query parameter

3. **Test Map Functionality** (30 min)
   - Verify segments render as colored lines
   - Verify lines styled by `worst_los` (SSOT colors)
   - Verify tooltips show on hover
   - Verify map auto-fits to features
   - Verify legend displays A-F with colors
   - Test fallback to Fredericton if no features

**Part C: UX Details** (1 hour)

1. **Update Navigation** (20 min)
   - Apply dark theme styles
   - Add active state highlighting
   - Reduce height for clean appearance

2. **Update Status Banners** (20 min)
   - Apply `.banner.warn` and `.banner.danger` classes
   - Verify warning vs danger states

3. **Update Tables** (20 min)
   - Right-align numeric columns
   - Convert plain LOS text to `.badge` pills
   - Verify hover effects

**Part D: Testing & Commit** (1 hour)

1. **Comprehensive Testing** (45 min)
   - Visual QA on all 7 pages
   - Test responsive layouts
   - Verify SSOT colors throughout
   - Test Segments map thoroughly
   - No console errors
   - Test on multiple browsers

2. **Commit & Close** (15 min)
   - Commit: `feat(ui): apply Canva v2 styles + fix segments map render`
   - Tag: `rf-fe-002-issue-282-complete`
   - Post completion comment to Issue #282
   - Post comment to Issue #279
   - Close Issue #282

### **Phase 4: Issue #280 - Density Visualization Features** üé®
**Priority**: MEDIUM-HIGH - Core operational intelligence features  
**Estimated Time**: 8-10 hours  
**Goal**: Generate heatmaps, bin-level details, and auto-captions

**Note**: This is the most complex issue. Consider breaking into sub-tasks or separate session if time constrained.

#### **Sub-Tasks for Issue #280:**

**Part A: Analytics Exporter** (4-5 hours)

1. **Heatmap Generation** (2 hours)
   - File: `analytics/export_frontend_artifacts.py`
   - Add function: `generate_heatmaps(bins_df, segments_meta, rulebook, out_dir)`
   - Use matplotlib to create PNG heatmaps
   - X-axis: time (bins), Y-axis: density (p/m¬≤)
   - Color bands by LOS thresholds (SSOT)
   - Save to: `artifacts/<run_id>/ui/heatmaps/<seg_id>.png`
   - Dimensions: 1200x600px, optimized for web

2. **Bin-Level CSV Export** (1 hour)
   - Add function: `generate_bin_details_csv(bins_df, out_dir)`
   - For each segment: export CSV with bin-level metrics
   - Columns: time_start, time_end, km_start, km_end, density, rate, utilization, los, flagged
   - Save to: `artifacts/<run_id>/ui/bin_details/<seg_id>.csv`

3. **Auto-Caption Generation** (2 hours)
   - Add function: `export_segment_captions(bins_df, segments_meta, rulebook, out_dir)`
   - Implement wave detection algorithm (gap = `next.t_start - prev.t_end > 5 min`)
   - Implement clearance detection (6-minute sustained ‚â§ 0.10 p/m¬≤)
   - Generate natural language summaries
   - Generate `captions.json` with complete schema
   - Use ChatGPT's pseudocode as reference

4. **Wire into Exporter** (30 min)
   - Update `export_ui_artifacts()` to call all three functions
   - Test with: `python analytics/export_frontend_artifacts.py 2025-10-19`
   - Verify all artifacts generated

**Part B: Storage & API** (2 hours)

1. **Storage Helpers** (45 min)
   - File: `app/storage.py`
   - Add: `heatmap_exists(storage, seg_id) -> bool`
   - Add: `get_heatmap_url(storage, seg_id) -> Optional[str]`
   - Add: `load_bin_details_csv(storage, seg_id) -> Optional[List[Dict]]`
   - Add: `load_captions(storage) -> dict`

2. **Density API Updates** (45 min)
   - File: `app/routes/api_density.py`
   - Update: `/api/density/segment/{seg_id}` to return:
     - `heatmap_url` (from storage helper)
     - `bin_details` (from CSV)
     - `caption` (from captions.json)
   - Test: Verify API returns all new fields

3. **Dashboard API Updates** (30 min)
   - Update DATASET paths if needed
   - Test: Verify no regressions

**Part C: UI Integration** (1 hour)

1. **Density Page Updates** (45 min)
   - File: `templates/pages/density.html`
   - Update `renderSegmentDetail()` to display caption
   - Add bin-level details table rendering
   - Verify heatmap loading (already implemented)
   - Add `.caption` CSS class styling

2. **Manual QA** (15 min)
   - Click segment row
   - Verify heatmap displays
   - Verify caption displays beneath heatmap
   - Verify bin-level table displays (if implemented)

**Part D: Testing** (1-2 hours)

1. **Unit Tests** (60 min)
   - `tests/test_exporter_captions.py`:
     - `test_captions_json_schema`
     - `test_caption_wave_splitting`
     - `test_clearance_rule`
     - `test_qualitative_labels`
   - `tests/test_ui_artifacts_qc.py`:
     - Add `test_captions_json_present`
     - Add `test_caption_present_for_flagged_segments`

2. **Integration Tests** (30 min)
   - Run: `python e2e.py --local`
   - Verify all artifacts generated
   - Verify captions.json has 22 segments
   - Verify heatmaps/*.png has 22 files
   - Verify bin_details/*.csv has 22 files

3. **API Contract Tests** (30 min)
   - Update: `tests/test_api_contracts.py`
   - Add assertions for new fields (heatmap_url, caption, bin_details)
   - Run: `pytest tests/test_api_contracts.py`

**Part E: Commit & Close** (30 min)
- Commit: `feat(density): add heatmaps, bin-level details, and auto-captions`
- Tag: `rf-fe-002-issue-280-complete`
- Post completion comment to Issue #280
- Post comment to Issue #279
- Close Issue #280

## üéØ **SUCCESS CRITERIA FOR TODAY**

### **Phase 1: Bug Fixes** ‚úÖ
- [ ] Flag count shows 17 flagged segments (not 2)
- [ ] Dashboard metrics correct
- [ ] Density API returns valid responses (no KeyError)

### **Phase 2: Issue #281 Complete** ‚úÖ
- [ ] `docs/DATA_SOURCE_MAP_AND_DICTIONARY.md` created
- [ ] All API endpoints verified against documentation
- [ ] All schemas validated against artifacts
- [ ] Issue #281 closed

### **Phase 3: Issue #282 Complete** ‚úÖ
- [ ] `static/css/app.css` created with complete design system
- [ ] FastAPI static files mounted
- [ ] All pages styled with new classes
- [ ] Segments map displays 22 colored segment lines
- [ ] Map tooltips, legend, and focus query working
- [ ] Visual QA passed on all pages
- [ ] Issue #282 closed

### **Phase 4: Issue #280 Complete** ‚úÖ
- [ ] Heatmap PNGs generated (22 segments)
- [ ] Bin-level CSV files generated (22 segments)
- [ ] `captions.json` generated with auto-captions
- [ ] Storage helpers implemented
- [ ] API returns heatmap_url, bin_details, caption
- [ ] UI displays heatmaps and captions
- [ ] All tests passing
- [ ] Issue #280 closed

## üöÄ **EXPECTED OUTCOMES**

### **End of Day Status:**
- **Issue #280**: COMPLETE - Density visualizations working
- **Issue #281**: COMPLETE - Data dictionary published
- **Issue #282**: COMPLETE - UI matches Canva v2, map working
- **Issue #279**: READY TO CLOSE - All child issues complete
- **Branch**: Ready for PR to main

### **Production Impact:**
- **Professional UI**: Modern design system, clean appearance
- **Functional Map**: Segments display correctly with tooltips
- **Rich Density Analysis**: Heatmaps + captions + bin-level details
- **Complete Documentation**: Data lineage and contracts documented
- **QA Confidence**: Contract tests validate data parity

## üìã **IMPLEMENTATION ORDER (RECOMMENDED)**

### **Morning Session (3-4 hours):**
1. **Bug Fixes** (1-2 hours)
   - Fix flag count bug
   - Fix density API bug
   - Test and commit

2. **Issue #281** (2-3 hours)
   - Format documentation
   - Validate against APIs
   - Commit and close

**Break for lunch / testing**

### **Afternoon Session (6-8 hours):**
1. **Issue #282** (6-8 hours)
   - Create CSS file
   - Mount static files
   - Update all page templates
   - Fix Segments map
   - Apply UX details
   - Test thoroughly
   - Commit and close

**OR** (if time permits):

1. **Issue #282** (4-5 hours)
   - Faster implementation if no issues

2. **Issue #280 - Part A** (3-4 hours)
   - Start analytics exporter work
   - Generate captions.json
   - Continue next session if needed

## üîß **TECHNICAL CONTEXT**

### **Current Git State:**
- **Branch**: `feature/rf-fe-002`
- **Latest Commit**: `7ec08e8` (Post-Step 8 fixes)
- **Tag**: `rf-fe-002-post-step8-fixes`
- **Status**: Clean working directory

### **Server State:**
- **Running**: `http://localhost:8080`
- **Virtual Env**: `test_env/bin/activate`
- **Artifacts**: From 2025-10-19 E2E run
- **Storage**: Local mode pointing to `artifacts/2025-10-19/ui/`

### **Known Working:**
- ‚úÖ Dashboard (with warnings for missing files)
- ‚úÖ Segments table (with parity tests)
- ‚úÖ Density table (with computed metrics)
- ‚úÖ Flow table (with CSV sums)
- ‚úÖ Reports downloads (including data files)
- ‚úÖ Health checks

### **Known Broken:**
- ‚ùå Flag count (shows 2, should show 17)
- ‚ùå Density API detail endpoint (KeyError)
- ‚ùå Segments map (only tiles, no features)
- ‚ùå UI visual appearance (bootstrap-ish)

## üìö **REFERENCE DOCUMENTS**

### **Critical to Read FIRST:**
- `@GUARDRAILS.md` - Non-negotiable rules
- `cursor/chats/CHAT_SESSION_SUMMARY_2025-10-20.md` - Yesterday's session
- This work plan (you're reading it!)

### **Issue Specifications:**
- **Issue #280**: https://github.com/thomjeff/run-density/issues/280
  - Read ALL comments (12 Q&A pairs with ChatGPT)
  - Reference: `cursor/chatgpt/ISSUE_280_MISSING_DENSITY_FEATURES.md`
  
- **Issue #281**: https://github.com/thomjeff/run-density/issues/281
  - Reference: `cursor/chatgpt/DATA_SOURCE_MAP_AND_DICTIONARY_DRAFT.md` (complete draft)
  
- **Issue #282**: https://github.com/thomjeff/run-density/issues/282
  - Read ALL comments (12 Q&A pairs with ChatGPT)
  - Reference: `cursor/chatgpt/ISSUE_282_UI_UX_POLISH.md`

### **Step Completion Summaries:**
- `cursor/chatgpt/STEP7_COMPLETION_SUMMARY.md` - Artifacts export
- `cursor/chatgpt/STEP8_COMPLETION_SUMMARY.md` - UI bindings

### **Key Files to Modify:**
- `analytics/export_frontend_artifacts.py` - Add heatmap/caption generation
- `app/storage.py` - Add helpers for heatmaps/captions
- `app/routes/api_density.py` - Enhance with new fields
- `app/routes/api_dashboard.py` - Fix flag count
- `app/main.py` - Mount static files
- `templates/base.html` - Add CSS and fonts
- `templates/pages/*.html` - Apply new CSS classes
- `static/css/app.css` - NEW FILE (complete CSS from ChatGPT)

## üéâ **MOTIVATION & CONTEXT**

### **Yesterday's Breakthrough:**
- **Perfect Specs**: ChatGPT provided complete, code-ready specifications
- **All Questions Answered**: 24 Q&A pairs, zero ambiguities
- **Ready-to-Paste Code**: CSS file, JavaScript snippets, pseudocode algorithms
- **100% Confidence**: Developer confirmed readiness on all three issues

### **Today's Opportunity:**
- **Complete RF-FE-002**: Finish the Epic started at v1.6.42 baseline
- **Close 4 Issues**: #280, #281, #282, and parent #279
- **Ship Professional UI**: Match Canva v2 mocks, functional map
- **Enable Operations**: Heatmaps and captions for race crew

## üèÅ **END OF DAY GOALS**

**Primary Success**: Issues #281 and #282 complete (documentation + UI polish)  
**Secondary Success**: Issue #280 complete or substantial progress  
**Bug Fixes**: Flag count and density API resolved  
**Epic Status**: Issue #279 ready to close (or nearly complete)  
**Technical Success**: All E2E tests passing, UI professional, map working  
**Strategic Success**: RF-FE-002 Epic complete and ready for production

**Ready for Next Session**: Final QA, PR creation, and merge to main! üöÄ

## ‚ö†Ô∏è **CRITICAL REMINDERS**

### **Before Starting ANY Python Work:**
```bash
source test_env/bin/activate
```

### **For GitHub CLI Work:**
```bash
deactivate  # Exit venv first
gh issue view 280 --comments
```

### **Testing Workflow:**
```bash
# Activate venv
source test_env/bin/activate

# Run E2E tests
python e2e.py --local

# Run unit tests
pytest tests/test_*.py

# Run specific tests
pytest tests/test_ui_artifacts_qc.py
```

### **Common Pitfalls to Avoid:**
- ‚ùå Don't hardcode LOS colors/thresholds (use SSOT)
- ‚ùå Don't create temp scripts (modify permanent modules)
- ‚ùå Don't skip tests before committing
- ‚ùå Don't modify main branch (work on feature branch)
- ‚ùå Don't commit without explicit user request

## üö® **SPECIAL INSTRUCTIONS FOR ISSUE #280**

### **Wave Detection - Exact Rule:**
```python
# Gap = next.t_start - prev.t_end
# Split wave when gap > 5 minutes (300 seconds)

gap_seconds = (next_bin.t_start - prev_bin.t_end).total_seconds()
if gap_seconds > 300:
    start_new_wave()
else:
    continue_current_wave()
```

### **Clearance Detection - Exact Rule:**
```python
# Build 1-minute time series
# Find earliest T where [T, T+6min) all ‚â§ 0.10 p/m¬≤

for T in time_series:
    six_min_window = time_series[T:T+6*60]
    if all(density <= 0.10 for density in six_min_window):
        clearance_time = T
        break
```

### **Column Normalization - Use This Mapping:**
```python
COLUMN_ALIASES = {
    "segment_id": ["seg_id", "segment"],
    "t_start": ["start_time", "ts_start"],
    "t_end": ["end_time", "ts_end"],
    "start_km": ["from_km", "km_start"],
    "end_km": ["to_km", "km_end"],
    "density": ["density_p_m2", "rho"],
    "rate_p_s": ["rate", "throughput_ps"],
    "flag_severity": ["flag", "severity"]
}
```

## üö® **SPECIAL INSTRUCTIONS FOR ISSUE #282**

### **Complete CSS File Location:**
ChatGPT provided the **entire CSS file** in Issue #282 comments. Use it EXACTLY as provided - no modifications.

### **Static Files Mounting:**
```python
# In app/main.py, add:
from fastapi.staticfiles import StaticFiles
app.mount("/static", StaticFiles(directory="static"), name="static")
```

### **Segments Map Fix:**
ChatGPT provided **complete Leaflet initialization snippet** in Issue #282 comments. Replace existing map code with this snippet.

### **Component Classes - Page by Page:**
- **Dashboard**: `.banner`, `.kpi-grid`, `.kpi`, `.section`
- **Segments**: `.map-wrap`, `.map-legend`, `.table-wrap`, `.table`
- **Density**: `.section`, `.table-wrap`, `.table`, `.caption`
- **Flow**: `.table-wrap`, `.table`
- **Reports**: `.section`, `.btn.primary`
- **Health**: `.section`, `.table-wrap`, `.table`, `.badge.gray`
- **Password**: `.section`, `.btn.primary`

## üìä **ESTIMATED TIME BREAKDOWN**

| Task | Estimated Time | Priority |
|------|---------------|----------|
| Bug Fixes | 1-2 hours | HIGH |
| Issue #281 (Docs) | 2-3 hours | HIGH |
| Issue #282 (UI/UX) | 6-8 hours | HIGH |
| Issue #280 (Density) | 8-10 hours | MEDIUM-HIGH |
| **Total** | **17-23 hours** | **Full 2-3 day effort** |

### **Realistic Today's Goal:**
- ‚úÖ Bug fixes (1-2 hours)
- ‚úÖ Issue #281 (2-3 hours)
- ‚úÖ Issue #282 (6-8 hours)
- **Total**: 9-13 hours (one full work day)

### **Tomorrow's Goal:**
- ‚úÖ Issue #280 (8-10 hours)
- ‚úÖ Final QA and testing
- ‚úÖ PR creation and merge

## üéÅ **HANDOFF CHECKLIST**

### **Files Available:**
- ‚úÖ `cursor/chats/CHAT_SESSION_SUMMARY_2025-10-20.md` - Yesterday's work
- ‚úÖ `cursor/workplans/WORK_PLAN_2025-10-21.md` - This work plan
- ‚úÖ `cursor/chatgpt/ISSUE_280_MISSING_DENSITY_FEATURES.md` - Issue #280 spec
- ‚úÖ `cursor/chatgpt/DATA_SOURCE_MAP_AND_DICTIONARY_DRAFT.md` - Issue #281 draft
- ‚úÖ `cursor/chatgpt/ISSUE_281_DATA_DICTIONARY.md` - Issue #281 spec
- ‚úÖ `cursor/chatgpt/ISSUE_282_UI_UX_POLISH.md` - Issue #282 spec

### **GitHub Issues to Review:**
- ‚úÖ Issue #279 (parent) - https://github.com/thomjeff/run-density/issues/279
- ‚úÖ Issue #280 - https://github.com/thomjeff/run-density/issues/280 (READ ALL COMMENTS)
- ‚úÖ Issue #281 - https://github.com/thomjeff/run-density/issues/281
- ‚úÖ Issue #282 - https://github.com/thomjeff/run-density/issues/282 (READ ALL COMMENTS)

### **Ready-to-Use Code:**
- ‚úÖ **Complete CSS file**: In Issue #282 comments
- ‚úÖ **Leaflet map snippet**: In Issue #282 comments
- ‚úÖ **Caption pseudocode**: In Issue #280 comments
- ‚úÖ **FastAPI static mount**: In Issue #282 comments

### **Known Blockers:**
- ‚ùå None - All specifications complete, all questions answered

## üöÄ **GETTING STARTED TOMORROW**

### **Step 1: Review Context (15 min)**
```bash
# Read yesterday's summary
cat cursor/chats/CHAT_SESSION_SUMMARY_2025-10-20.md

# Read this work plan
cat cursor/workplans/WORK_PLAN_2025-10-21.md

# Review GUARDRAILS
cat docs/GUARDRAILS.md
```

### **Step 2: Activate Environment (1 min)**
```bash
source test_env/bin/activate
```

### **Step 3: Check Git State (2 min)**
```bash
git status
git log --oneline -5
git branch
```

### **Step 4: Review GitHub Issues (10 min)**
```bash
deactivate  # For GitHub CLI

# Read all issues with comments
gh issue view 279 --comments
gh issue view 280 --comments  # CRITICAL: Read ALL comments
gh issue view 281 --comments
gh issue view 282 --comments  # CRITICAL: Read ALL comments
```

### **Step 5: Choose First Task (2 min)**
Recommended order:
1. Bug fixes (quick wins)
2. Issue #281 (documentation, no code changes)
3. Issue #282 (UI polish, visual improvements)
4. Issue #280 (complex, save for fresh mind)

### **Step 6: Start Implementation**
Follow the implementation checklist from the chosen issue's GitHub comments.

## üí° **PRO TIPS FOR TOMORROW'S SESSION**

### **For Issue #281 (Data Dictionary):**
- Copy-paste ChatGPT's draft directly
- Focus on formatting and validation
- Test all API endpoints to verify accuracy
- Quick win, low risk

### **For Issue #282 (UI/UX Polish):**
- Use ChatGPT's CSS file EXACTLY as provided
- Don't modify the design - trust the specification
- Focus on applying classes correctly
- Test visually on each page

### **For Issue #280 (Density Features):**
- Start with caption generation (most complex)
- Use ChatGPT's pseudocode as reference
- Test wave detection with known data first
- Generate all three artifact types together

### **Testing Strategy:**
- Test after each major change
- Run E2E tests before committing
- Visual QA for UI changes
- API contract tests for backend changes

## üéØ **DECISION POINTS**

### **If Short on Time:**
**Priority 1**: Bug fixes + Issue #281 (3-5 hours)  
**Priority 2**: Issue #282 (6-8 hours)  
**Priority 3**: Issue #280 (defer to next session)

### **If Full Day Available:**
**All three issues** can be completed in 17-23 hours (2-3 days)

### **If Blocked:**
- Check GitHub issue comments for all Q&A
- Review ChatGPT specifications in `cursor/chatgpt/`
- Ask user for clarification if truly stuck
- Don't guess - verify with specifications

## üèÅ **SESSION SUCCESS DEFINITION**

**Minimum Success**: Bug fixes + Issue #281 + Issue #282 complete  
**Target Success**: All three issues (#280, #281, #282) complete  
**Stretch Success**: RF-FE-002 Epic (#279) ready to close with PR created  

**Technical Success**: Professional UI, working map, rich density features  
**Process Success**: All tests passing, proper commits, documentation updated  
**Strategic Success**: RF-FE-002 Epic complete, ready for production deployment

**Ready for Future Sessions**: Production deployment, user testing, and next epic! üöÄ

---

## üìã **QUICK REFERENCE**

### **GitHub Issues:**
- #279 (parent): RF-FE-002 Epic
- #280: Heatmaps + Captions (8-10h)
- #281: Data Dictionary (2-3h)
- #282: UI/UX Polish (6-8h)

### **Key Files:**
- `analytics/export_frontend_artifacts.py` - Add caption/heatmap generation
- `app/storage.py` - Add helpers
- `app/routes/api_density.py` - Fix bugs, enhance API
- `app/main.py` - Mount static files
- `templates/base.html` - Add CSS/fonts
- `static/css/app.css` - NEW FILE (complete CSS provided)

### **Key Commands:**
```bash
# Activate environment
source test_env/bin/activate

# Run E2E tests
python e2e.py --local

# Run analytics exporter
python analytics/export_frontend_artifacts.py 2025-10-19

# Run unit tests
pytest tests/test_*.py

# Check API
curl http://localhost:8080/api/dashboard/summary | jq .
```

### **Emergency Contacts:**
- ChatGPT specifications: GitHub issue comments
- Session summary: `cursor/chats/CHAT_SESSION_SUMMARY_2025-10-20.md`
- GUARDRAILS: `docs/GUARDRAILS.md`

---

**GO TIME!** üöÄ All specifications ready. All questions answered. Ready to ship! üí™

